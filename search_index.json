[
["index.html", "Getting used to R, RStudio, and R Markdown 1 Introduction", " Getting used to R, RStudio, and R Markdown Chester Ismay 2016-08-20 1 Introduction in the top pane of this book website. HTML is the preferred format but the ePub format is also available. Since there are animated GIFs included and PDFs don't handle GIFs natively, PDF format is not provided. --> This resource is designed to provide new users to R, RStudio, and R Markdown with the introductory steps needed to begin their own reproducible research. A review of many of the common R errors encountered (and what they mean in laymen’s terms) is also provided. Many screenshots and GIFs will be included, but if further clarification is needed on these or any other aspect of the book, please create a GitHub issue here or email me with a reference to the error/area where more guidance is necessary. Push requests for typos or improvements are also welcome. This book will evolve and be updated as needed based on feedback. You can always check the date below see when the book was last updated. Book was last updated: ## [1] &quot;By cismay on Saturday, August 20, 2016 11:08:52 PDT&quot; "],
["2-whyR.html", "2 Why R?", " 2 Why R? If you are brand new to R and programming, you may be scared. You aren’t used to having to type commands to tell the computer what to do. You may be more used to using drop-down menus and other graphical user interfaces that allow you to pick what you’d like to do. So why are so many companies, colleges/universities, and individuals of all disciplinary backgrounds shifting towards using R? There are lots of answers to this question, but some of the most important for us now are: R is free. RStudio is free. One of the biggest perks about working with R and RStudio is that they are both provided free of charge to use. R is an open-source programming language that has grown tremendously in recent years with developers adding more functionality and packages on a daily basis. Where other more proprietary packages are sometimes stuck in the dark ages (the 1990s, for example) of development and can be incredibly expensive to purchase, R continues to be a free alternative that allows users of all levels to contribute. RStudio is a graphical user interface that allows one to write R code and view the results of that code in an easy way. It is also free to download and work with. Analyses done using R are reproducible. As many scientific fields push towards more reproducible analyses, the point-and-click proprietary systems actually serve as a hindrance to this process. If you need to re-run your analysis using these systems, you’ll need to carefully copy-and-paste your analysis and plots into your text editors from potentially beginning to end. Anyone that has done this sort of copy-and-pasting knows that it is prone to errors and incredibly tedious. If you use the workflows described in this book, your analyses will be reproducible so you don’t need to worry about these copy-and-pasting issues. As you might have guessed by now, it would be much better to be able to update your code/data inputs and re-run all of your analysis than to have to worry about manually moving your results from one program to another. Reproducibility also helps you as a programmer since your greatest collaborator will probably be yourself a few months or years down the road. Instead of having to carefully write down all the steps you took to find the right drop-down menu option, your entire code is stored. Using R makes collaboration easier. This also helps you with collaboration since, as you will see later, you can share an R Markdown file containing all of your analysis, documentation, commentary, and the code to others. This reduces the time to needed to work with others and reduces the likelihood of errors being made in following along with point-and-click analyses. The mantra here will be to Say No to Copy-And-Paste! both for your sanity and for the sake of science. Finding answers to questions is much simpler. If you have ever had an issue with software, you know how difficult it is to find answers to your questions. “How can I describe the process to someone else? Do I need to take screenshots? Do I really need to call IT and wait for hours for someone to respond?” R is a programming language and so it is much easier (after a bit of practice) to use Google or Stack Overflow to find answers to your questions. You’ll be amazed at how many other users have encountered the same sorts of errors you will see when you begin. I frequently (almost on a daily basis) Google things like “How do I make a side-by-side boxplot in R coloring by a third variable?”. You’ll become better at working with R by reaching out to others for help and by answering questions that others have. In addition, Chapter 6 describes many common errors and how you can fix them. Struggling through programming helps you learn. We all know that learning isn’t easy. Do you have trouble remembering how to follow a list of more than 10 steps or so? Do you find yourself going back over and over again because you can’t remember what step comes next in the process? This is extremely common especially if you haven’t done the procedure in awhile. Learning via following a procedure is easy in the short-term, but can be extremely frustrating to remember in the long-term. Programming (if done well) promotes long-term thinking to short-term fixes. One unfortunate thing that we frequently take for granted is that our brain tricks us into picking the easy route. If you truly want to learn how to do something (like programming with R), you’ll need to feel frustrated at times. Any time you learn something you’ve been frustrated. (We tend to forget all the frustration and only think about where we currently are.) R still frustrates me from time to time, but I grow through practice and I look forward to the challenges. Hadley Wickham encapsulated this phenomenon nicely in the Prologue of the book “Hands-On Programming with R” (Grolemund 2014): As you learn to program, you are going to get frustrated. You are learning a new language, and it will take time to become fluent. But frustration is not just natural, it’s actually a positive sign that you should watch for. Frustration is your brain’s way of being lazy; it’s trying to get you to quit and go do something easy or fun. If you want to get physically fitter, you need to push your body even though it complains. If you want to get better at programming, you’ll need to push your brain. Recognize when you get frustrated and see it as a good thing: you’re now stretching yourself. Push yourself a little further every day, and you’ll soon be a confident programmer. References "],
["3-rstudiobasics.html", "3 R and RStudio Basics 3.1 What is R? 3.2 What is RStudio? 3.3 Working in RStudio Server 3.4 RStudio Layout", " 3 R and RStudio Basics 3.1 What is R? In Chapter 2, I discussed many of the reasons why you should be doing your analyses (especially those of the data type) using R. If you skipped over that chapter in the hopes of just hopping into learning about R, I request that you to go back to it and carefully read it over. As you begin working with R, it is especially important to review that introductory chapter from time to time. 3.1.1 R beginnings R was created by a group of statisticians who wanted an open-source alternative to the costly proprietary options. Being created by statisticians (instead of computer scientists) means that R has some quirky aspects to it that take a little bit of time to get used to. We’ll see that many packages have been developed to help with this and that you don’t need to have advanced degrees in Statistics to be able to work with R now. Getting back to the development of R… R was created by Ross Ihaka and Robert Gentleman in New Zealand at the University of Auckland. It is a spin-off of the S programming language and is named partly after the first names of its developers (as you can see in the emphasis above). The beginning ideas for creating R came in 1992 and the first version of R was released in 1994. You can find much more about the background of R and its features as well as its connections to the S language on its Wikipedia page. 3.1.2 R packages I first learned to use R while a graduate student at Northern Arizona University from Dr. Philip Turk in 2007. At the time, I never thought that R could have exploded in users as we have seen since 2011. I never would have thought that students taking an introductory statistics course would be encouraged to learn to use R. In 2007, it was still largely esoteric and tricky language used by statisticians to do analyses. Getting used to the syntax for producing plots and working with data was especially tricky for those with little to no programming experience. So what has changed since 2007 about learning R? I believe one of the biggest developments has been the creation of packages to make R easier to work with for newbies. Packages are created by users of R to increase the functionality of the base R installation. Packages created by Hadley Wickham and others recently have greatly expanded the capabilities of R, while also working to make beginning with R simpler. From the Wikipedia page referenced earlier, as of January 2016, there were around 7800 additional R packages available on common R repositories.1 Another great development is the graphical user interface called RStudio and the package developed by the those that work for RStudio, Inc. called rmarkdown. We will discuss rmarkdown (also referred to as R Markdown) in a Chapter 4, and will now focus on discussing RStudio. 3.2 What is RStudio? RStudio is a powerful, free, open-source integrated development environment for R. It began development in 2010 and its first beta release came in February 2011. It is available in two editions: RStudio Desktop and RStudio Server. This book will focus mostly on using the RStudio Server, but both versions are nearly identical to work with. You can find instructions linked below for downloading R and RStudio on Windows and Mac machines. If you are using RStudio Server, your professor and members of your organization’s IT department have done these steps for you. On the RStudio Server you log on using a web browser to an account sitting on the cloud. There are many advantages to using the RStudio Server for the beginning user including sharing of R projects to help with feedback and error resolution. Installation of software can also cause its own headaches and this is eliminated by using the RStudio Server. Note for advanced users: You can also install your very own RStudio Server for around $5 per month on Digital Ocean. Instructions to do so can be found from Dean Attali here and on the Digital Ocean site here. After you complete a few months of work with the RStudio Server, it is recommended that you download RStudio Desktop to your computer. The instructions to do so are below. 3.2.1 Installing R and RStudio Desktop It is worth noting that you can’t just install RStudio Desktop without installing R as RStudio needs to have R installed in order to run. A step-by-step guide to installing R and RStudio Desktop with screenshots can be found here for the Mac and here for a PC. Unless you plan to create PDF documents (which requires a multiple gigabyte download of \\(\\LaTeX\\)) you can skip some of the later steps of the installation. It is recommended that you select HTML as the Default Output Format for R Markdown. You’ll see more about this in Chapter 4. 3.3 Working in RStudio Server 3.3.1 Logging in and initial screen The RStudio Server provides a web-based way to run analyses in R. This means that you will only need an internet connection and a web browser to run your analyses. Your professor or administrator will provide you with a link to the web location of your RStudio Server. After entering the link, you’ll see a page that looks something like: Figure 3.1: Login page for RStudio Server After logging in with your username and password, you should see a layout similar to what follows. Figure 3.2: Initial page for RStudio Server For your own reference, a screenshot of RStudio Desktop looks like: Figure 3.3: Initial page for RStudio Desktop As you can see they are almost identical. This makes working between the two different RStudio set-ups painless. A discussion of what each of the three different RStudio panes (will soon be four panes) and their corresponding tabs will occur in Chapter 4. You’ll find that a lot of what follows also applies to RStudio Desktop (except for the Shared Projects feature), but it always recommended to create an RStudio project regardless of whether you are on the cloud or working locally. 3.3.2 Basic Workflow with RStudio A good habit to get into whenever you start a new project with R code is to create a new RStudio project to go along with it. RStudio project files have the extension .Rproj and store metadata that goes along with the documents you’ve saved and information about the R environment you are working in. More information about RStudio projects is available from RStudio, Inc. here. If you are sharing homework or lab assignments with your instructor, for example, it might make sense to create an RStudio project, share it with your instructor, and then create new folders for each lab. We will follow this example below. The GIF below shows you how to create a new RStudio project called initial and also your first R Markdown file. Note that you also may see a description about what version of R is running on your initial login like shown in the GIF below in the Console pane. Figure 3.4: Create a new RStudio project and an R Markdown file We have our first_rmarkdown.Rmd file set up. 3.3.3 Sharing Projects on RStudio Server Pro You will now see an example of how to share this project with another user. This will enable you and collaborators (other students, your instructor, etc.) to work on the Rmd file at the same time. This is similar to working on a Google Doc at the same time as someone else. RStudio Server comes in a couple different formats and you’ll need to make sure you (or your IT administrator) have installed RStudio Server Pro to use the Shared Projects feature. You can find more information from RStudio, Inc. on this here. Below is an example GIF of sharing this initial.Rproj project file with another user of the RStudio Server. Figure 3.5: Share an RStudio project on RStudio Server Pro Both myself and bottk can now work together on this project. We can save files to the common folder where initial.Rproj resides and type our commentary and code into first_rmarkdown.Rmd or other files. In Chapter 4, you’ll see why it is recommended you work in R Markdown files and you’ll also begin to see some examples of how R works with R Markdown. 3.4 RStudio Layout You may be initially a little overwhelmed by all the different panes and tabs that are available in RStudio. You’ll soon learn to love this layout but, as with all things, it will take a little bit to get used to it. We will begin with the top left pane, proceed to the top right pane, then to the bottom left pane, and lastly to the bottom right pane. These panes can be customized but it is recommended for beginning users to keep things in this standard layout. 3.4.1 Code Editor / View Window Likely the pane where you will spend a majority of your time is in the top left. When you first login this pane isn’t there, but it was created when we made the first_rmarkdown.Rmd. This pane serves as a place to view the contents of files and objects in R. In the GIF below, you can see that we can change the text in this file and then save the file. Note that the tab that gives the filename will change its color from black to red and an asterisk will appear after the filename. This is to remind you that the file is not saved. You’ll need to get into the habit of saving files frequently. You can have multiple tabs open and view different files in this pane. You’ll also see that you can View datasets in this pane in Chapter 4. Figure 3.6: Editing an R Markdown file in RStudio It may not be clear what these additions are really doing just yet. You’ll be pressing the Knit HTML button near the top of the pane to put all of your text, code, and its output together. We aren’t quite there just yet though! 3.4.2 Environment / History The next pane includes by default an Environment tab and a History tab. To get a sense of what these tabs provide we’ll need to also use the bottom left pane and the Console tab. I’ll show you how to create multiple objects in R using the Console. Initially you will see that the Environment tab tells us that the “Environment is empty.” If you click on the History tab, you should also see a blank screen with a few icons. We won’t go over using all of these buttons here, but you are encouraged to hover over them and click on them to get a sense for what they do. As I enter code into the Console watch to see how the Environment and History tabs change. Figure 3.7: Observe the Environment and History tabs based on Console input You can think of the Console as a place to play around. It is your R sandbox. You can test your code to make sure it is working and then copy that text into your Rmd file into a chunk after you are satisfied with it. We’ll see more examples of this in the chapters to come. Note that, by default, when you enter the name of an object into the console like I did with sum_1_2 it displays the result. You’ve also been shown what is called the assignment operator denoted by &lt;-. You can read this as putting the contents of the right-hand-side into an object named whatever appears on the left-hand-side. For example, num1 is the name of an object that stores the value 7. A powerful feature of the R language has been introduced in the sum_1_2 &lt;- sum(num1, num2) line. sum is a function. Functions are denoted by their name and then a parenthesis, their arguments separated by commas, and then a closing parenthesis. You’ll see many examples of these going forward. Of course, we’ll be using R for more than just a basic calculator shown here but this should give you a good idea of what the Environment and History tabs store. 3.4.3 Console You’ll frequently use the Console as a way to check your work or thoughts on how to solve a problem using R. Before RStudio came around, most users of R just had a window like the Console provides where they entered their commands and then looked at the results in different windows. We will see that the Console and the Code Editor/View Window will allow us to store all of our code in a file and then “run” that code through the Console to check that it works. The example GIF below shows how this may be done. Figure 3.8: Showing the Console interacting with an R Markdown document R chunk Rules for naming objects It is good practice to get in the habit of naming variables corresponding to what they actually represent. If you are dividing two different sums of numbers, you might want to choose a name like ratio_of_sums to refer to that object. R has a couple restrictions on what can be included in the name of R objects: Object names cannot begin with a number. Object names cannot contain symbols used for mathematics or to denote other operations native to R. These symbols include $, @, !, ^, +, -, /, and *. Another important property of R is that is case-sensitive. You’ll see what this means in the GIF below that also includes examples of invalid names of objects. Note that we will continue to work inside the R chunk as we did in the last GIF. You’ll see that these code chunks provide a nice way to keep track of our important analyses. Figure 3.9: Invalid object names and case sensitivity in R You may have noticed that R will do some checks and alert you to potential errors by placing a red X to the left of the line of code with an error. It won’t catch all errors, but this can be helpful. Not also that Name, name, and nAme refer to three different values. Another thing to notice is that you can store numbers into an object with a given name like we did earlier with num1. If we’d like to store a character string such as “Chester”, we can provide the name of the object on the left-hand-side of &lt;- and the string in quotation marks on the right-hand-side of &lt;-. There are more complex object types that you will see in Chapter 5, but it is always important to think about the difference between a number and a character in R. It’s also a good idea to not call objects the names of functions that are built into R. You may want to call the addition of two numbers sum and R will allow this, but it is HIGHLY recommended that you create more descriptive names and not choose to name objects the same as common R functions. Something like sum_densities is better and less likely to be the name of a function. 3.4.4 The help function (?) Of course, you won’t know what all of the names of built-in functions are until you practice, but it is something to think about. If you are ever wondering if a function is built-in or is in a package you have included, you can use the ? function in the Console to check. Some examples are shown below as a GIF. Figure 3.10: Using the ? function to look up help on an R function 3.4.5 The bottom right pane The bottom right pane in RStudio contains the most tabs by default and is a useful place to view a variety of miscellaneous information about your RStudio project and its files. Files The leftmost tab here shows the file and folder structure. This shows you where the files are stored, what they are called, and any folders that may exist in your project folder. This can be thought of as similar to going to My Computer on a PC or opening Finder on a PC. Similarly, this gives the file and directory structure either on the cloud for RStudio Server or on your local machine for RStudio Desktop. Plots / Viewer You’ll see clearer examples of what the Plots and Viewer tabs provide in Chapter 4. As you likely guessed Plots will show you the resulting graphs/figures that your R code has generated. The Viewer tab can show you the resulting HTML file created from an R Markdown Knit. Packages You can get a sense for what packages have been downloaded to your computer/your cloud server by clicking on the Packages tab. You can also see which packages are loaded into the current working environment by looking to see if a check-mark exists next to the package name. Note that you may not have all of the packages loaded onto your machine that I do below in the GIF. That’s OK. This is just an example of what you may expect. Figure 3.11: Installed packages and whether or not they are loaded currently You’ll also notice a Description of the package as well as the Version number here. Packages are frequently updated and improved so this is a way to check to see if you have the most up-to-date version of a package. Remember that this is likely taken care of for you if you are on an RStudio Server installation. If you are on RStudio Desktop, you might find the Install and Update buttons useful for downloading new packages or updating currently installed ones. Help We also saw an example of using the Help tab when we invoked the ? function. This will show you documentation on R functions, datasets, and packages. If you see code that you aren’t really sure about, it is often a good go-to to enter a question mark followed by the name and see if the built-in documentation can help you out. You’ll see how to download these packages via install.packages(&quot;dplyr&quot;) and load them into your current R working environment via library(&quot;dplyr&quot;), for example, in Chapter 5.↩ "],
["4-rmarkdown.html", "4 R Markdown 4.1 Fixing Errors in an R Markdown file 4.2 The Components of an R Markdown File 4.3 R Markdown Chunk Options 4.4 General Guidelines for Writing R Markdown Files 4.5 Help -&gt; Cheatsheets", " 4 R Markdown R Markdown provides an easy way to produce a rich, fully-documented reproducible analysis. It allows its user to share a single file that contains all of the commentary, R code, and metadata needed to reproduce the analysis from beginning to end. R Markdown allows for chunks of R code to be included along with Markdown text to produce a nicely formatted HTML, PDF, or Word file without having to know any HTML or \\(\\LaTeX\\) code or have to fuss with getting the formatting just right in a Microsoft Word DOCX file. One R Markdown file can generate a variety of different formats and all of this is done in a single text file with a few bits of formatting. I think you’ll be pleasantly surprised at how easy it is to write an R Markdown document after your first few encounters. 4.1 Fixing Errors in an R Markdown file We now shift back to the R Markdown file created in Chapter 3 called first_rmarkdown.Rmd. We know that we left some errors in the creation of variables there, and while it might seem strange to show you errors, it is good exposure for someone new to this to see what errors one might see initially. We are going to see what happens when we click the Knit HTML button with these errors. Then we will clean up the code and see what the resulting file looks like from the Knit. Figure 4.1: Errors in an R Markdown file When you initially created an R Markdown file, a basic template with some code and text was inputted for you. This is to give you a sense of how to create your own R Markdown file with your own R code and your own commentary. We modified some of that code here. I decided to remove all of the lines in the cars named chunk of code even though the errors did not occur in the declaration of the objects that had names stored in them. We see that an HTML file is produced in the Viewer pane because View in Pane was selected. As you look over the Including Plots text you may be surprised to see that there is no plot provided in the R Markdown file, but in the HTML file there is a scatter-plot showing temperature and pressure varying. This is something alluded to earlier. R Markdown runs the code stored in R chunks and then places that output into the HTML (or PDF or DOCX, etc.) format. You can also see that the text appears as commentary before and after the R code. You’ll understand in a bit why the text “Including Plots” is so much larger than the other text. Important note: Remember that all of the R code you want to run needs to be stored in a chunk (in the right order) for your analysis to be reproducible AND for you not to receive errors when you Knit. It is easy to do a lot of work in the R Console and then forget to add that work into a chunk in your Rmd file. This is probably the number one error you will see when you first begin working in RStudio. An example of this error is below in a GIF file. Figure 4.2: Forgetting to copy from Console to R chunk The object not found errors are the most frequently encountered errors and along with misspellings and not completing R code segments provide the vast majority of issues with R. You’ll see a further breakdown of this in Chapter 6. 4.2 The Components of an R Markdown File 4.2.1 YAML The top part of the file is called the YAML header. YAML stands for “YAML Ain’t Markup Language” and its website at http://yaml.org makes the following statement as to what it is: YAML is a human friendly data serialization standard for all programming languages. Essentially, the YAML stores the metadata needed for the document. You can see an example of a YAML header from our first_rmarkdown.Rmd file: --- title: &quot;First RMarkdown&quot; author: &quot;Chester Ismay&quot; output: html_document --- There are many other fields that can be customized in the YAML header. The important thing to notice here are the three hyphens that begin and end the YAML header. Indentation also plays a role with YAML so be careful with your alignment of text. 4.2.2 Headers Figure 4.3: Headers start with hashtags As you can see above, you can create a lot of different sized headers by simply adding one or more # in front of the text you’d like to denote the header. 4.2.3 Emphasis Whenever you see a hash-tag in the text of your R Markdown document, you now know that this will correspond to bolded larger text2 that denotes the start of a section of your document. This is one of the nice features of R Markdown. You can simply look at the plain text and know what it will produce in the knitted document. We can also add different styles of emphasis to words, phrases, or sentences by surrounding them in matching symbols. Below are some examples. Figure 4.4: Different emphasis styles in Markdown You are beginning to see how easy it is to customize your output. We’ll next discuss ways to add links to URLs, create ordered and unordered lists, and other frequently used Markdown features. 4.2.4 Links To add a link to a URL, you simply enclose the text you’d like displayed in the resulting HTML file inside [ ] and then the link itself inside ( ) right next to each other with no space in between. Figure 4.5: Links to webpages 4.2.5 Lists The GIF below shows the process of creating both ordered and unordered lists. Figure 4.6: Links to webpages Note that only numbers are needed as we saw by numbering “Warm up food” with a “1.” We can also combine unordered and ordered lists by indenting the text two spaces. In many of the examples that follow, you will see the actual text you’d type into your R Markdown document highlighted with a gray background and also the results of that text immediately below it. 1. Wake up - Get out of bed 1. Warm up food - Open kitchen door - Get plate out of cupboard 2. Make coffee i. Warm up water ii. Grind beans 3. Make breakfast We can have a paragraph (or two) here describing how we could go about making breakfast. If we indent the paragraph a few spaces and create a newline, it will indent below the item. Wake up Get out of bed Warm up food Open kitchen door Get plate out of cupboard Make coffee Warm up water Grind beans Make breakfast We can have a paragraph (or two) here describing how we could go about making breakfast. If we indent the paragraph a few spaces it will indent below the item. 4.2.6 Miscellaneous Markdown Line breaks / white spacing Line breaks in combination with white space are incredibly important pieces in Markdown. They frequently denote the start of a new paragraph. Here is an example of text with only a line break. You may expect this line to appear in a new paragraph but it doesn&#39;t. Here is an example of text with only a line break. You may expect this line to appear in a new paragraph but it doesn’t. In order to start a new paragraph, you’ll need to be sure that white space exists between the two paragraphs: Here is an example of text with a line break and white space. You may expect this line to appear in a new paragraph and it does. Here is an example of text with a line break and white space. You may expect this line to appear in a new paragraph and it does. Horizontal rules Another useful way to divide up different parts of your analysis is by including horizontal lines. These can be easily adding by placing three asterisks next to each other (or three hyphens): *** --- Blockquotes If you’d like to quote someone or produce an indented text block, you can easily do so by adding a &gt; before the passage: &gt; Reproducible research is the idea that data analyses, and more generally, scientific claims, are published with their data and software code so that others may verify the findings and build upon them. - Roger Peng Reproducible research is the idea that data analyses, and more generally, scientific claims, are published with their data and software code so that others may verify the findings and build upon them. - Roger Peng Commenting Text There are times where you might want to comment out text inside an R Markdown document. Say you wrote something that you don’t really want in the resulting knitted document, but you aren’t quite sure if you should delete it completely. To do so you’ll just need to enclose the block of text in &lt;!-- --&gt; as seen below: &lt;!-- I&#39;d like to save this text for later and don&#39;t want to delete it yet. --&gt; You won’t see the commented out results here in the book. Equations If you’d like nice mathematical formulas in your document, you can add them between two dollar signs: $y = mx + b$ \\(y = mx + b\\) 4.2.7 R Chunks It took us a bit to get to what I believe is the best part about R Markdown: the addition of R code into the document and a compilation of that code in the resulting knitted document. You’ve seen some R chunks in the R Markdown file already. There are some properties to get used to about them: They always begin and end with three backticks ```. After the initial three backticks, you’ll see R chunks begin with {r, potentially some names and other chunk options, and then close that first line with a }. The lines wrapped inside the beginning and closing three backticks is R code that you could run in the R Console. Note that spaces in front of these backticks will produce Let’s explore an example of recognizing and creating our own R chunks in our first_rmarkdown.Rmd file: Figure 4.7: Creating and identifying R chunks This example introduces you to two different ways to create a vector of values. You’ll see further discussion of this in Chapter 5. You can see that the code is automatically run when we pressed the Knit HTML button with its output in the knitted file. Important note: Any other potential R chunks after this chunk will have access to the three variables created here: count20, count100_by_5, and prod. Any chunks before the mult_vectors named chunk WILL NOT have access to these variables yet. You can read the document like a book, so it is important to add objects and work with them in appropriate order. You’ll receive errors from R if you don’t. 4.2.8 Inline R code We’ve seen that we can add R code and have that run in an R chunk of code enclosed by three backticks. We may want to do a simple calculation on the fly inside of the text of our document though. Figure 4.8: R code running in the text Another crafty approach is to have the text produced in our document to automatically update based on the results of R code. To see an example of this, we will select a number at random from our count20 vector. If it is greater than or equal to 10, we will say so. If it isn’t, we will say so. Figure 4.9: Update text corresponding to R value You also see that an error was made in that I didn’t include the third argument to ifelse in quotation marks. When I fixed the code and pressed Knit HTML again the error went away. 4.2.9 Code Highlighting As you see in the previous example, it is a good habit to highlight the names of your R objects to distinguish them from the usual text. This can be done by enclosing the word in a single backtick such as what we did with one_value. 4.3 R Markdown Chunk Options The most common R chunk options you’ll likely work with are echo, eval, and include. By default, all three of these options are set to TRUE. echo dictates whether the code that produces the result should be printed before the corresponding R output eval specifies whether the code should be evaluated or just displayed without its output include specifies whether the code AND its output should be included in the resulting knitted document. If it is set to FALSE the code is run but no remnant of the code or its output will be in the resulting document. Figure 4.10: Common R chunk options Since we specified that eval=FALSE and that was where we declared the one_value variable we now obtain an error. You can also include multiple chunk options by separating them by a comma. Figure 4.11: Common R chunk options - Part 2 4.4 General Guidelines for Writing R Markdown Files White space is your friend. You should always include a blank white space between R chunks and your Markdown text. It makes your document much more readable and can reduce some potential errors. Also, leave a line of white space between header text and your paragraphs. Commentary is always good. Explain yourself and your ideas whenever you can. Remember that your greatest collaborator is likely yourself a few months down the road. Be nice to yourself and explain what you are doing so that you can remember! Remember that the Console and R Markdown environments (when Knitting) don’t interact with each other. This forces you to include only the code in your R chunks that produces exactly the results you want to share with others. Don’t inflate your document with extra output. You need to be concise and clear in exactly what you are doing. The chunk options can really beautify your documents and customize them exactly to what you’d like the reader of your documents to see. You can find more information on all of the available R chunk options here. 4.5 Help -&gt; Cheatsheets RStudio includes really nice cheatsheets that can act as great references to many of the common tasks you will do inside of RStudio. You can get nice PDF versions of the files by going to Help -&gt; Cheatsheets inside RStudio. Figure 4.12: RStudio Cheatsheets Screenshot Unless you want to have a fourth, fifth, or sixth level header, but these are not common.↩ "],
["5-rmdanal.html", "5 R Analysis using R Markdown 5.1 A beginning directory/file workflow 5.2 Using R with periodic table dataset 5.3 Data Structures 5.4 Vectorized operations 5.5 Indexing and Subsetting 5.6 Functions 5.7 Mean, median, standard deviation, five-number summary, distribution 5.8 R Markdown templates", " 5 R Analysis using R Markdown In this chapter, you’ll see many of the ways that R stores objects and more details on how you can use functions to solve problems in R. You’ll be working with a common dataset derived from something that you likely have encountered before: the periodic table from chemistry. 5.1 A beginning directory/file workflow “File organization and naming are powerful weapons against chaos.” - Jenny Bryan Something that is not frequently discussed when working with files and programming languages like R is the importance of naming your files something relevantly and having organization of your files in folders. You may be tempted to call a file analysis.Rmd but what happens when you need to change your analysis months from now and you’ve named many files for many different projects analysis.Rmd in many different folders. It’s much better to give your future self a break and commit to concise naming strategies. You can choose a variety of ways to name files. These guidelines are what I try to follow: Group similar style files into the same folder whenever possible. Try not to have one folder that contains all of the different types of files you are working with. It is much easier to find what you are looking for if you put all of your data files in a data folder, all of your figure files in a figure folder, and so on. This rule can be broken if you only have one or two of each type. It can be the case that too many folders can waste your time when a useful search for the appropriate file may be able to find your find faster than digging through a complex hierarchy of directories. Name your files consistently so that what the file contains can be easily identified from the name of your file, but be concise. Seeing test1.Rmd and test2.Rmd doesn’t tell us much about what is actually in the files. It’s OK to create a temporary file or two if you don’t think you will be using it going forward, but you should be in the habit of reviewing your work at the end of your session and naming files that we needed appropriately. Something like model_fit_sodium.Rmd is so much better in the long-run. Remember to think about your future self whenever you can, especially with programming. Be nice to yourself so that future self really appreciates past self. Use an underscore to separate elements of the file name. The underscore _ produces a visually appealing way for us to realize there is a separation between content. You may be tempted to just use a space, but spaces cause problems in R and in other programming languages. Some folks prefer to just change the case of the first letter of the word to bring attention. Here are a few examples of file names. You can be the judge as to what is most appealing to you: barplot_weight_height.Rmd vs barplotWeightHeight.Rmd vs (the worst) barplotweightheight.Rmd Whatever you choose for style, be consistent and think about other users as you name your files. If you were passed a smorgasbord of files that is a mess to deal with and hard to understand, you wouldn’t like it, right? Don’t be that person to someone else (or yourself)! 5.2 Using R with periodic table dataset We now hop into the basics of working with a dataset in R. We will also explore the ways R stores data in objects, how to access specific elements in those objects, and also how to use functions, which are one of the most useful pieces of R to help with organization and clean code. 5.2.1 Loading data from a file One of the most common ways you’ll want to work with data is by importing it from a file. A common file format that works nicely with R is the CSV (comma-seperated values) file. The following R commands first download the CSV file from the internet on my webpage into the periodic-table-data.csv file on your computer, then reads in the CSV stored, and then gives the name periodic_table to the data frame that stores these values in R: download.file(url = &quot;http://ismayc.github.io/periodic-table-data.csv&quot;, destfile = &quot;periodic-table-data.csv&quot;) periodic_table &lt;- read.csv(&quot;periodic-table-data.csv&quot;, stringsAsFactors = FALSE) We will be discussing both strings and factors in the data structures section (Section 5.3) and why this additional parameter stringsAsFactors set to FALSE is recommended. It’s good practice to check out the data after you have loaded it in: View(periodic_table) 5.2.2 Loading data from an R package This dataset about the periodic table is also loaded into an R package I created called chemistr. Currently, this package exists on GitHub instead of CRAN (the Comprehensive R Archive Network) so instead of just running install.packages(&quot;chemistr&quot;), you’ll need to install another package first that contains the function we need to install an R package from GitHub. We’ll first download the devtools package from a CRAN repository hosted by RStudio and install it: install.packages(&quot;devtools&quot;, repos = &quot;http://cran.rstudio.org&quot;) Next we will download and install the chemistr package from my GitHub account using the install_github function in the devtools package. (This is where the :: come in.) devtools::install_github(&quot;ismayc/chemistr&quot;) We could have also loaded all of the devtools package in and then ran install_github without needing the ::. This is a common error in failing to load in a package first and then asking R to run a function inside that package. R will complain about not knowing where to find it and this is most commonly remedied by ensuring the library function is run before calling the function. We can see this error below in the GIF: Lastly, we can load the data set into R by using the data function: data(periodic_table, package = &quot;chemistr&quot;) As before after reading in the CSV, we can quickly view the data frame in spreadsheet-like form: View(periodic_table) 5.3 Data Structures vectors lists data frames matrices factors 5.4 Vectorized operations 5.5 Indexing and Subsetting 5.6 Functions default arguments) 5.7 Mean, median, standard deviation, five-number summary, distribution Case matters in R! Why do some arguments require quotations and others don’t? 5.8 R Markdown templates "],
["6-errors.html", "6 Deciphering Common R Errors", " 6 Deciphering Common R Errors This chapter will be updated with GIFs as common errors are reported to me throughout the year. For references on errors and some solutions in the meantime, check out the following two links by Noam Ross and David Smith: https://github.com/noamross/zero-dependency-problems/blob/master/misc/stack-overflow-common-r-errors.md http://blog.revolutionanalytics.com/2015/03/the-most-common-r-error-messages.html "],
["7-references.html", "7 References", " 7 References "]
]
